<html>
	<head>

	</head>
	<body>
			<section id="reddit">
			</section>
					<script>

		function getUtil(url, callback) {
			let xmlhttp;

			xmlhttp = new XMLHttpRequest();

			xmlhttp.onreadystatechange = function() {
				if(xmlhttp.readyState == 4 && xmlhttp.status === 200) {
					callback(xmlhttp.responseText)
				}
			}

			xmlhttp.open("GET",url, true);
			xmlhttp.send()
		}
    function showBlogData(data){
    	let article = document.createElement('article');
    	let contentDetails = data[0].data.children[0].data;

    	article.innerHTML = `<p>Title: ${contentDetails.title} <br>
                           Votes: ${contentDetails.ups}</p>`;
    }
		function init() {
			getUtil("https://www.reddit.com/r/javascript.json",(redditData) => {
				JSON.parse(redditData).data.children.forEach((info) => {
				 	var article = document.createElement('article');
				 	let anchor = document.createElement('a');
				 	after = JSON.parse(redditData).data.after
				 	let url = "https://www.reddit.com" + info.data.permalink + ".json"
				 	anchor.innerHTML = info.data.title;
				  
				  anchor.onclick = (e) =>{
				  	e.preventDefault();
				  	console.log(url);

				  	getUtil(url,(blogData)=>{

				  		console.log(blogData);
				  		showBlogData(JSON.parse.blogData)
				  	})
				  }
          article.appendChild(anchor);
          document.body.appendChild(document.createElement('br'));
          article.className = "col-md-12 col-xs-12"
					document.getElementById("reddit").append(article);
				});
			})
		}
				
		window.onload = init;

		</script>
	</body>
</html>